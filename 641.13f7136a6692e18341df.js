"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[641],{6641:(H,Z,c)=>{c.r(Z),c.d(Z,{TasksModule:()=>G});var m=c(8583),g=c(977),u=c(9577),v=c(4330),d=c(9976),t=c(7716),p=c(665),k=c(8307),C=c(1841),A=c(4520);let h=(()=>{class s{constructor(e,n){this.http=e,this.logger=n}addTaskList(e){return this.http.post("/api/tasks/list",{title:e,tasks:[]}).pipe((0,k.b)(l=>this.logger.log(`Added task list "${l.title}" with id: ${l.id}`)))}getTaskLists(){return this.http.get("/api/tasks/list").pipe((0,k.b)(n=>this.logger.log(`Fetched ${n.length} task lists`)))}getTaskList(e){return this.http.get(`/api/tasks/list/${e}`).pipe((0,k.b)(o=>this.logger.log(`Fetched task list "${o.title}" with id: ${o.id}`)))}updateTaskList(e){return this.http.patch(`/api/tasks/list/${e.id}`,e).pipe((0,k.b)(o=>this.logger.log(`Updated task list "${o.title}" with id: ${o.id}`)))}}return s.\u0275fac=function(e){return new(e||s)(t.LFG(C.eN),t.LFG(A.Y))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac}),s})();function x(s,i){if(1&s&&(t.ynx(0),t._uU(1),t._UZ(2,"br"),t.BQk()),2&s){const e=i.$implicit;t.xp6(1),t.hij(" ",e," ")}}function M(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"ngb-alert",12),t.NdJ("closed",function(){return t.CHM(e),t.oxw().errors=[]}),t.YNc(1,x,3,1,"ng-container",13),t.qZA()}if(2&s){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.errors)}}function F(s,i){1&s&&(t.TgZ(0,"div"),t._uU(1,"Title is required."),t.qZA())}function E(s,i){if(1&s&&(t.TgZ(0,"div",14),t.YNc(1,F,2,0,"div",15),t.qZA()),2&s){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.title.errors?null:e.f.title.errors.required)}}function S(s,i){1&s&&(t._UZ(0,"fa-icon",16),t._uU(1," Save "))}function q(s,i){1&s&&(t._UZ(0,"fa-icon",17),t._uU(1," Loading ")),2&s&&t.Q6J("spin",!0)}let b=(()=>{class s{constructor(e,n,o){this.fb=e,this.tasksService=n,this.onSave=new t.vpe,this.taskListForm=this.fb.group({title:["",p.kI.required]}),this.isReady=!1,o.addIcons(d.r6l,d.LM3)}ngOnInit(){if(this.taskList){const e=this.taskList.title;this.taskListForm.controls.title.setValue(e),this.taskListForm.controls.title.addValidators(n=>e==n.value?{sameValue:{value:n.value}}:null)}this.isReady=!0}get f(){return this.taskListForm.controls}onSubmit(){if(this.taskListForm.valid){this.isReady=!1;const e=this.taskListForm.controls.title.value,n={next:o=>{this.isReady=!0,o?(console.log("Saved task list: ",o),this.onSave.emit(o)):console.error("Saved null task list")},error:o=>{this.isReady=!0,console.error("Failed to save list: ",o)}};this.taskList?this.tasksService.updateTaskList(Object.assign(Object.assign({},this.taskList),{title:e})).subscribe(n):this.tasksService.addTaskList(e).subscribe(n)}}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(p.qu),t.Y36(h),t.Y36(u.by))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-task-list-editor"]],inputs:{taskList:"taskList"},outputs:{onSave:"onSave"},decls:14,vars:7,consts:[[3,"formGroup","ngSubmit"],[1,"form-group","mb-3"],["class","text-start","type","danger",3,"closed",4,"ngIf"],[3,"disabled"],[1,"form-floating","position-relative"],["formControlName","title","type","text","id","taskListTitle","name","title","placeholder","New Task List","maxlength","256","required","","autofocus","",1,"form-control"],["for","taskListTitle"],["class","invalid-tooltip",4,"ngIf"],[1,"form-group","text-center"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],[3,"ngIf","ngIfElse"],["isProcessing",""],["type","danger",1,"text-start",3,"closed"],[4,"ngFor","ngForOf"],[1,"invalid-tooltip"],[4,"ngIf"],["icon","save",1,"me-1"],["icon","spinner",1,"me-1",3,"spin"]],template:function(e,n){if(1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.TgZ(1,"div",1),t.YNc(2,M,2,1,"ngb-alert",2),t.TgZ(3,"fieldset",3),t.TgZ(4,"div",4),t._UZ(5,"input",5),t.TgZ(6,"label",6),t._uU(7,"Title"),t.qZA(),t.YNc(8,E,2,1,"div",7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"div",8),t.TgZ(10,"button",9),t.YNc(11,S,2,0,"ng-template",10),t.YNc(12,q,2,1,"ng-template",null,11,t.W1O),t.qZA(),t.qZA(),t.qZA()),2&e){const o=t.MAs(13);t.Q6J("formGroup",n.taskListForm),t.xp6(2),t.Q6J("ngIf",n.errors&&n.errors.length>0),t.xp6(1),t.Q6J("disabled",!n.isReady),t.xp6(5),t.Q6J("ngIf",n.f.title.invalid&&(n.f.title.dirty||n.f.title.touched)),t.xp6(2),t.Q6J("disabled",!n.taskListForm.valid||!n.isReady),t.xp6(1),t.Q6J("ngIf",n.isReady)("ngIfElse",o)}},directives:[p._Y,p.JL,p.sg,m.O5,p.Fj,p.JJ,p.u,p.nD,p.Q7,g.xm,m.sg,u.BN],styles:[""]}),s})(),y=(()=>{class s{constructor(e){this.viewContainerRef=e}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.s_b))},s.\u0275dir=t.lG2({type:s,selectors:[["","modal",""]]}),s})();function I(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"div",3),t.TgZ(1,"h4",4),t._uU(2),t.qZA(),t.TgZ(3,"button",5),t.NdJ("click",function(){return t.CHM(e),t.oxw().activeModal.dismiss("Cross click")}),t.qZA(),t.qZA()}if(2&s){const e=t.oxw();t.xp6(2),t.Oqu(e.title)}}function O(s,i){}let w=(()=>{class s{constructor(e,n){this.activeModal=e,this.componentFactoryResolver=n,this.title="",this.inputs={},this.outputs={}}ngOnInit(){console.log("modal onInit")}ngOnDestroy(){console.log("modal onDestroy")}initialize(e,n,o,a){this.title=e,this.componentType=n,this.inputs=o,this.outputs=a;const l=this.componentFactoryResolver.resolveComponentFactory(this.componentType),r=this.modal.viewContainerRef;r.clear();const f=r.createComponent(l);console.log("Binding inputs:",this.inputs),this.bindInputs(f.instance,l.inputs),console.log("Binding outputs:",this.outputs),this.bindOutputs(f.instance,l.outputs)}bindInputs(e,n){const o=this.inputs;Object.keys(o).forEach(a=>{var l,r;if(!n.some(({templateName:f})=>f===a))throw new Error(`Input ${a} is not a ${null!==(r=null===(l=this.componentType)||void 0===l?void 0:l.name)&&void 0!==r?r:"dynamic component"} input`)}),n.forEach(({propName:a,templateName:l})=>{const r=o[l];r&&(e[a]=r)})}bindOutputs(e,n){const o=this.outputs;n.forEach(({propName:a})=>{if(!(e[a]instanceof t.vpe))throw new Error(`Output ${a} must be an instance of EventEmitter`)}),Object.keys(o).forEach(a=>{var l,r;if(!n.some(({templateName:f})=>f===a))throw new Error(`Output ${a} is not a ${null!==(r=null===(l=this.componentType)||void 0===l?void 0:l.name)&&void 0!==r?r:"dynamic component"} output.`);if(!(o[a]instanceof Function))throw new Error(`Output ${a} must be a function`)}),n.forEach(({propName:a,templateName:l})=>{const r=o[l];r&&e[a].subscribe(f=>{r(f)})})}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(g.Kz),t.Y36(t._Vd))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-modal"]],viewQuery:function(e,n){if(1&e&&t.Gf(y,7),2&e){let o;t.iGM(o=t.CRH())&&(n.modal=o.first)}},inputs:{title:"title",componentType:"componentType",inputs:"inputs",outputs:"outputs"},decls:3,vars:1,consts:[["class","modal-header",4,"ngIf"],["ngbAutofocus","",1,"modal-body"],["modal",""],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"]],template:function(e,n){1&e&&(t.YNc(0,I,4,1,"div",0),t.TgZ(1,"div",1),t.YNc(2,O,0,0,"ng-template",2),t.qZA()),2&e&&t.Q6J("ngIf",n.title)},directives:[m.O5,y],styles:[""]}),s})(),T=(()=>{class s{constructor(e){this.ngbModalService=e}open(e,n,o={},a={}){const l=this.ngbModalService.open(w,{centered:!0,scrollable:!0});return l.componentInstance.initialize(e,n,o,a),l}closeAll(){this.ngbModalService.dismissAll()}}return s.\u0275fac=function(e){return new(e||s)(t.LFG(g.FF))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac}),s})(),L=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-task-editor"]],inputs:{task:"task"},decls:14,vars:2,consts:[[1,"mb-3"],["for","taskTitle",1,"form-label"],["type","text","id","taskTitle","aria-describedby","taskTitleHelp",1,"form-control",3,"value"],["id","taskTitleHelp",1,"form-text"],["for","taskDescription",1,"form-label"],["id","taskDescription","rows","3",1,"form-control"],["type","submit",1,"btn","btn-primary"]],template:function(e,n){1&e&&(t.TgZ(0,"form"),t.TgZ(1,"div",0),t.TgZ(2,"label",1),t._uU(3,"Title"),t.qZA(),t._UZ(4,"input",2),t.TgZ(5,"div",3),t._uU(6,"Please use up to 255 characters."),t.qZA(),t.qZA(),t.TgZ(7,"div",0),t.TgZ(8,"label",4),t._uU(9,"Description"),t.qZA(),t.TgZ(10,"textarea",5),t._uU(11),t.qZA(),t.qZA(),t.TgZ(12,"button",6),t._uU(13,"Save"),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.Q6J("value",n.task.title),t.xp6(7),t.Oqu(n.task.description))},styles:[""]}),s})(),J=(()=>{class s{constructor(e,n){this.modalService=e,n.addIcons(d.UJf,d.$aW)}ngOnInit(){}editTask(e){this.modalService.open("Edit task",L,{task:e})}deleteTask(e){this.modalService.open("Delete task",L,{task:e})}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(T),t.Y36(u.by))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-task"]],inputs:{task:"task"},decls:8,vars:2,consts:[[1,"task","d-flex","align-items-center"],[1,"flex-grow-1"],["type","checkbox",1,"form-check-input","me-1",3,"checked"],["type","button",1,"btn","btn-outline-primary","btn-sm","align-self-start","me-1",3,"click"],["icon","pencil-alt"],["type","button",1,"btn","btn-outline-danger","btn-sm","align-self-start",3,"click"],["icon","trash"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t._UZ(2,"input",2),t._uU(3),t.qZA(),t.TgZ(4,"button",3),t.NdJ("click",function(){return n.editTask(n.task)}),t._UZ(5,"fa-icon",4),t.qZA(),t.TgZ(6,"button",5),t.NdJ("click",function(){return n.deleteTask(n.task)}),t._UZ(7,"fa-icon",6),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("checked",n.task.isDone),t.xp6(1),t.hij(" ",n.task.title," "))},directives:[u.BN],styles:[".task[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{visibility:hidden;opacity:0;transition:visibility 0s linear .33s,opacity .33s linear}.task[_ngcontent-%COMP%]:hover   button[_ngcontent-%COMP%]{visibility:inherit;opacity:1;transition-delay:0s}"]}),s})();function U(s,i){if(1&s&&(t.TgZ(0,"li",14),t._UZ(1,"app-task",15),t.qZA()),2&s){const e=i.$implicit;t.xp6(1),t.Q6J("task",e)}}function N(s,i){if(1&s&&t.YNc(0,U,2,1,"li",13),2&s){const e=t.oxw();t.Q6J("ngForOf",e.taskList.tasks)}}function Y(s,i){1&s&&(t.TgZ(0,"li",16),t._uU(1,"No tasks"),t.qZA())}let $=(()=>{class s{constructor(e,n){this.modalService=e,this.onDelete=new t.vpe,n.addIcons(d.UJf,d.$aW,d.r8p)}ngOnInit(){}editTaskList(e){this.modalService.open("Edit task list",b,{taskList:e},{onSave:this.onEditTaskList})}onEditTaskList(e){console.log("Edited task list:",e),this.taskList=e,this.modalService.closeAll()}deleteTaskList(e){this.modalService.open("Delete task list",b,{taskList:e},{onSave:n=>{this.onEditTaskList(n)}})}onDeleteTaskList(e){console.log("Deleted task list:",e),this.onDelete.emit(),this.modalService.closeAll()}addTask(e){}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(T),t.Y36(u.by))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-task-list"]],inputs:{taskList:"taskList"},outputs:{onDelete:"onDelete"},decls:16,vars:3,consts:[[1,"card"],[1,"card-header","d-flex","align-items-center"],[1,"flex-grow-1"],["type","button",1,"btn","btn-outline-primary","btn-sm","align-self-start","me-1",3,"click"],["icon","pencil-alt"],["type","button",1,"btn","btn-outline-danger","btn-sm","align-self-start",3,"click"],["icon","trash"],[1,"list-group","list-group-flush"],[3,"ngIf","ngIfElse"],["noTasks",""],[1,"card-footer","d-flex","justify-content-end"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],["icon","plus"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],[3,"task"],[1,"list-group-item","disabled","text-center"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._uU(3),t.qZA(),t.TgZ(4,"button",3),t.NdJ("click",function(){return n.editTaskList(n.taskList)}),t._UZ(5,"fa-icon",4),t.qZA(),t.TgZ(6,"button",5),t.NdJ("click",function(){return n.deleteTaskList(n.taskList)}),t._UZ(7,"fa-icon",6),t.qZA(),t.qZA(),t.TgZ(8,"ul",7),t.YNc(9,N,1,1,"ng-template",8),t.YNc(10,Y,2,0,"ng-template",null,9,t.W1O),t.qZA(),t.TgZ(12,"div",10),t.TgZ(13,"button",11),t.NdJ("click",function(){return n.addTask(n.taskList)}),t._UZ(14,"fa-icon",12),t._uU(15," Add task "),t.qZA(),t.qZA(),t.qZA()),2&e){const o=t.MAs(11);t.xp6(3),t.Oqu(n.taskList.title),t.xp6(6),t.Q6J("ngIf",n.taskList.tasks.length>0)("ngIfElse",o)}},directives:[u.BN,m.O5,m.sg,J],styles:[".card-header[_ngcontent-%COMP%], .card-footer[_ngcontent-%COMP%]{background-color:#e9ecef}.card-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{visibility:hidden;opacity:0;transition:visibility 0s linear .33s,opacity .33s linear}.card-header[_ngcontent-%COMP%]:hover   button[_ngcontent-%COMP%]{visibility:inherit;opacity:1;transition-delay:0s}"]}),s})();function Q(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"div",12),t.TgZ(1,"app-task-list",13),t.NdJ("onDelete",function(){const a=t.CHM(e).$implicit;return t.oxw(3).onDeleteTaskList(a)}),t.qZA(),t.qZA()}if(2&s){const e=i.$implicit;t.xp6(1),t.Q6J("taskList",e)}}function R(s,i){if(1&s&&t.YNc(0,Q,2,1,"div",11),2&s){const e=t.oxw(2);t.Q6J("ngForOf",e.taskLists)}}function D(s,i){1&s&&(t.TgZ(0,"div",14),t.TgZ(1,"div",15),t._uU(2,"No task lists"),t.qZA(),t.qZA())}function P(s,i){if(1&s&&(t.TgZ(0,"div",8),t.YNc(1,R,1,1,"ng-template",9),t.YNc(2,D,3,0,"ng-template",null,10,t.W1O),t.qZA()),2&s){const e=t.MAs(3),n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.taskLists.length>0)("ngIfElse",e)}}function B(s,i){1&s&&(t.TgZ(0,"div",16),t._UZ(1,"fa-icon",17),t.qZA()),2&s&&(t.xp6(1),t.Q6J("spin",!0))}const j=[{path:"",component:(()=>{class s{constructor(e,n,o){this.tasksService=e,this.modalService=n,this.taskLists=[],this.isReady=!1,o.addIcons(d.LM3,d.r8p,d.acZ)}ngOnInit(){this.getTaskLists()}getTaskLists(){this.isReady=!1,this.tasksService.getTaskLists().subscribe(e=>{this.taskLists=e,this.isReady=!0},e=>{console.log(e),this.isReady=!0})}addTaskList(){this.modalService.open("Add task list",b,{},{onSave:e=>{this.onAddTaskList(e)}})}onAddTaskList(e){e?(console.log("Adding new task list:",e),this.taskLists.push(e)):console.error("Adding null task list"),this.modalService.closeAll()}onDeleteTaskList(e){this.taskLists=this.taskLists.filter(n=>n!==e)}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(h),t.Y36(T),t.Y36(u.by))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-tasks"]],decls:11,vars:2,consts:[[1,"container","py-5"],[1,"d-flex","justify-content-between"],["role","button","routerLink","/",1,"btn","btn-secondary","mb-3"],["icon","arrow-left",1,"me-1"],["type","button",1,"btn","btn-primary","mb-3",3,"click"],["icon","plus",1,"me-1"],["class","row",4,"ngIf","ngIfElse"],["isProcessing",""],[1,"row"],[3,"ngIf","ngIfElse"],["noLists",""],["class","col-sm-6 col-lg-4 mb-4",4,"ngFor","ngForOf"],[1,"col-sm-6","col-lg-4","mb-4"],[3,"taskList","onDelete"],[1,"col"],[1,"card","p-4","text-center"],[1,"text-center"],["icon","spinner","size","3x",3,"spin"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"a",2),t._UZ(3,"fa-icon",3),t._uU(4," Back "),t.qZA(),t.TgZ(5,"button",4),t.NdJ("click",function(){return n.addTaskList()}),t._UZ(6,"fa-icon",5),t._uU(7," Add list "),t.qZA(),t.qZA(),t.YNc(8,P,4,2,"div",6),t.YNc(9,B,2,1,"ng-template",null,7,t.W1O),t.qZA()),2&e){const o=t.MAs(10);t.xp6(8),t.Q6J("ngIf",n.isReady)("ngIfElse",o)}},directives:[v.yS,u.BN,m.O5,m.sg,$],styles:[""]}),s})()}];let z=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[v.Bz.forChild(j)],v.Bz]}),s})(),G=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({providers:[T,h],imports:[[m.ez,p.UX,g.IJ,u.uH,z]]}),s})()}}]);